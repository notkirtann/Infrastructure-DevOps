# Docker for Developers - Part 3: Docker Port Mapping

## What is Port Mapping?
Port mapping in Docker allows you to expose container ports to the host machine, enabling communication between the containerized application and external clients. This is essential for services like web servers, databases, and APIs that need to be accessible from outside the container.

When you run a Docker container, you can specify port mappings using the `-p` or `--publish` flag. The syntax for port mapping is as follows:

```bash
docker run -it -p <host_port>:<container_port> <image_name>
```
## Auto Port Mapping
If you want Docker to automatically assign a random available port on the host machine, you can use the following syntax:

```bash
docker run -it -p <container_port> <image_name>
```
When your application exposes many ports, manual mapping becomes tedious. Using a capital -P tells Docker to map all "exposed" ports to random available ports on your host machine.
- How it works: Docker looks at the EXPOSE instruction in your Dockerfile.
- Command: docker run -P `<image_name>`
- Verification: Use docker ps to see which random host ports were assigned.
### The EXPOSE Instruction
Adding EXPOSE `<port>` in a Dockerfile does not actually open the port for security reasons. It serves two purposes:

- Documentation: Tells other developers which ports the app intends to use.
- Automation: Allows the -P flag to identify which ports to map automatically.
- Pro Tip: You can expose ranges, e.g., EXPOSE 8000-8009.

## Automatic Container Cleanup (--rm)
When you run a Docker container with the `--rm` flag, Docker automatically removes the container once it stops. This is particularly useful for temporary or one-off containers that you don't need to keep after they have finished executing.
```bash
docker run --rm -it -p <host_port>:<container_port> <image_name>
```
This helps to keep your Docker environment clean by preventing the accumulation of stopped containers that are no longer needed.

## Detached Mode (-d)
Running a container in detached mode allows it to run in the background, freeing up your terminal for other tasks. This is especially useful for long-running services like web servers or databases.
```bash
docker run -d -p <host_port>:<container_port> <image_name>
```
When you run a container in detached mode, Docker will return the container ID, and you can use commands like `docker ps` to see running containers and `docker logs <container_id>` to view their output.

## Useful Inspection Commands

- docker inspect `<image_name>`: Use this to check which ports are marked as exposed without looking at the source code.

- docker ps: Displays running containers, their IDs, and their active port mappings.

- docker run --help: The quickest way to find documentation for any flag (like -d, -P, or --rm) directly in the terminal.